# WildNest 酒吧H5项目任务清单

## 前端开发任务

### 0. 前端项目创建
- [x] 创建前端项目目录结构
- [x] 选择合适的前端技术栈（Vue3 + Vite + TypeScript）
- [x] 初始化前端项目基础配置

### 1. 项目初始化与配置
- [x] 创建Vue 3项目基础结构
- [x] 配置Vite构建工具
- [x] 集成Vant UI组件库
- [x] 配置Vue Router路由系统
- [x] 集成Vuex/Pinia状态管理
- [x] 配置Axios请求库与拦截器
- [x] 配置ESLint和Prettier代码规范
- [x] 实现移动端适配方案（rem布局+媒体查询）

### 2. 酒单模块开发
- [x] 实现酒品分类展示页面
- [x] 开发酒品详情页面
- [x] 实现分类筛选与搜索功能
- [ ] 开发酒品收藏功能（本地存储）
- [x] 实现轮播图展示招牌酒品
- [x] 开发酒品图片预览功能
- [x] 实现底部导航栏固定入口

### 3. 留言板模块开发
- [x] 实现留言分类与标签切换
- [x] 开发留言列表展示功能
- [x] 实现点赞功能（防重复点赞）
- [x] 开发回复功能
- [x] 实现删除/编辑功能
- [x] 开发留言提交功能
- [x] 实现图片上传至OSS功能
- [x] 开发分页加载功能
- [x] 实现敏感词过滤（前端）

### 4. 今天喝什么模块开发
- [x] 实现问答式推荐流程界面
- [x] 开发动态推荐算法
- [x] 实现可视化选择组件
- [x] 开发进度展示功能
- [x] 实现推荐结果页面

### 5. 关于酒吧模块开发
- [x] 实现酒吧简介页面
- [x] 开发团队介绍页面
- [x] 实现图片展示功能（轮播图）

### 6. 后台管理前端开发
- [x] 实现登录认证页面
- [x] 开发留言板管理界面
- [ ] 实现酒单管理界面
- [ ] 开发推荐服务管理界面

## 后端开发任务

### 1. 项目初始化与配置
- [x] 创建Spring Boot 3项目基础结构
- [x] 集成MyBatis-Plus数据访问层
- [x] 配置MySQL数据库连接
- [x] 集成阿里云OSS SDK
- [x] 配置SLF4J+Logback日志系统
- [x] 实现AOP统一日志切面
- [x] 创建基础实体类和通用配置
- [x] 配置全局异常处理器
- [x] 实现简单的管理员认证机制（Session或简单Token）

### 2. 数据库设计与实现
- [x] 设计并创建酒单相关表（drink_category, drink）
- [x] 设计并创建留言板相关表（comment, reply, oss_image）
- [x] 设计并创建推荐服务相关表（question, option, recommendation）
- [x] **变更记录**：移除数据库触发器，改为应用层逻辑实现统计字段维护
- [ ] 创建数据库初始化脚本（基础数据插入）
- [x] 实现数据库连接测试和健康检查
- [x] 添加数据库索引优化

### 2.5. API文档与测试
- [x] 集成Swagger/OpenAPI文档
- [x] 编写API接口文档
- [ ] 创建Postman测试集合
- [ ] 实现接口单元测试
- [ ] 添加接口集成测试

### 3. 酒单服务开发
- [x] 创建酒品分类Mapper和Service
- [x] 实现酒品分类接口（GET /categories）
- [x] 创建酒品Mapper和Service
- [x] 开发酒品列表查询接口（GET /drinks，支持分页和分类筛选）
- [x] 实现酒品详情查询接口（GET /drinks/{id}）
- [x] 开发酒品搜索接口（GET /drinks/search，支持关键词和标签）
- [x] 实现酒品浏览量统计功能
- [x] 开发酒品管理接口（POST/PUT/DELETE /admin/drinks）
- [x] 实现酒品分类管理接口（POST/PUT/DELETE /admin/categories）
- [x] 添加酒品数据校验和业务规则

### 4. 留言板服务开发
- [x] 创建留言相关Mapper（Comment, Reply, LikeRecord, OssImage）
- [x] 实现留言Service层基础功能
- [x] 开发留言提交接口（POST /comments，支持文字+图片）
- [x] 开发留言列表查询接口（GET /comments，支持分页和分类筛选）
- [x] 实现点赞功能接口（POST /comments/{id}/like，防重复点赞）
- [x] 开发回复功能接口（POST /comments/{id}/replies）
- [x] 实现留言删除接口（DELETE /comments/{id}，用户和管理员权限）
- [x] 开发留言编辑接口（PUT /comments/{id}，仅用户本人）
- [x] 实现图片上传接口（POST /upload/image，OSS存储）
- [x] 开发敏感词过滤功能（集成第三方词库或自建）
- [x] 实现IP和设备ID记录功能
- [ ] **应用层统计逻辑实现**：
  - [ ] 回复新增时自动更新comment.reply_count (+1)
  - [ ] 回复删除时自动更新comment.reply_count (-1)
  - [ ] 点赞新增时自动更新comment.like_count (+1)
  - [ ] 点赞删除时自动更新comment.like_count (-1)
  - [ ] 实现定期校验任务，使用COUNT查询校正统计数据
  - [ ] 添加事务保证统计数据一致性
- [ ] 实现留言置顶功能（管理员权限）
- [ ] 开发留言审核功能（标记敏感内容）

### 5. 推荐服务开发 🔄 进行中
- [x] 创建推荐相关Mapper（Question, Option, RecommendationRule, RecommendationLog）
- [x] 实现推荐Service层基础功能
- [x] 开发问题库查询接口（GET /recommend/questions，按顺序返回问题和选项）
- [x] 实现用户选择提交接口（POST /recommend/submit，记录用户选择）
- [x] 开发推荐算法核心逻辑（基于规则匹配和权重计算）
- [x] 实现推荐结果接口（POST /recommend/result，返回推荐酒品列表）
- [x] 开发推荐规则配置接口（POST/PUT/DELETE /admin/recommend/rules）
- [x] 实现推荐记录统计功能（用于分析用户偏好）
- [ ] 添加推荐结果缓存机制（提升性能）
- [x] 开发推荐效果分析接口（管理员查看推荐数据）

### 6. 后台管理服务开发 ⏳ 待完善
- [x] 创建管理员相关Mapper和Service
- [x] 实现简单的管理员登录认证接口（POST /admin/login）
- [x] 开发Session或简单Token认证机制
- [x] 实现基础的权限验证（拦截器或过滤器）
- [x] 开发留言管理接口（GET/PUT/DELETE /admin/comments）
- [x] 实现留言批量操作接口（批量删除、置顶、审核）
- [x] 开发酒单管理接口（完整的CRUD操作）
- [x] 实现推荐服务管理接口（问题、选项、规则管理）
- [x] 开发数据统计接口（留言数、酒品数、推荐使用情况）
- [ ] 实现系统配置管理接口
- [ ] 开发操作日志记录功能
- [ ] 实现管理员密码修改接口

## 部署与运维任务

### 1. 环境搭建
- [ ] 配置Linux/CentOS服务器
- [ ] 安装配置Nginx反向代理
- [ ] 配置HTTPS证书
- [ ] 安装配置MySQL数据库
- [ ] 配置阿里云OSS存储

### 2. 应用部署
- [ ] 编写前端Dockerfile
- [ ] 编写后端Dockerfile
- [ ] 配置Docker Compose部署文件
- [ ] 实现CI/CD自动化部署流程
- [ ] 配置日志监控系统

### 3. 性能优化
- [ ] 实现图片压缩功能
- [ ] 配置Nginx静态资源缓存
- [ ] 优化分页查询性能
- [ ] 实现防XSS安全措施
- [ ] 配置Nginx限流防护

## 测试任务

### 1. 前端测试
- [ ] 进行移动端兼容性测试
- [ ] 测试各功能模块交互
- [ ] 进行性能与加载速度测试

### 2. 后端测试
- [ ] 编写单元测试
- [ ] 进行接口功能测试
- [ ] 测试数据库性能
- [ ] 进行安全性测试

### 3. 集成测试
- [ ] 进行前后端集成测试
- [ ] 测试完整业务流程
- [ ] 进行压力测试

## 上线与迭代计划

### 1. V1.0（基础版）
- [ ] 完成所有前台模块开发
- [ ] 完成后台管理核心功能
- [ ] 进行上线前测试
- [ ] 部署生产环境

## 当前项目状态分析

### ✅ 已完成
- 后端Spring Boot项目基础架构搭建完成
- 数据库表结构设计完成（12个核心表）
- 基础配置类、实体类、工具类已创建
- MyBatis-Plus + MySQL数据访问层已配置
- 阿里云OSS集成已完成
- 全局异常处理和日志切面已实现
- 酒单服务接口开发完成（分类、列表、详情、搜索等）
- 留言板服务接口开发完成（CRUD、点赞、回复、图片上传）
- **推荐服务接口开发基本完成**（问答推荐算法、规则配置、统计分析）
- 后台管理接口开发基本完成（认证、酒单管理、留言管理、推荐管理）
- 前端Vue3项目搭建完成（Vite + TypeScript + Vant UI）
- 前端核心页面开发完成（酒单、留言板、推荐、关于我们）
- 前端后台管理页面开发完成（登录、仪表盘）
- Swagger API文档集成完成
- 数据库连接和表结构验证完成

### 🔄 下一步重点任务（按优先级排序）
1. **前端完善**：完成推荐问题管理页面（增删改查）
2. **数据完善**：创建数据库初始化脚本（基础数据插入）
3. **统计功能**：实现应用层统计逻辑（回复数、点赞数自动维护）
4. **性能优化**：添加推荐结果缓存机制（提升性能）
5. **测试优化**：创建Postman测试集合和接口单元测试

### 📋 建议的开发顺序
1. 先完成后端核心业务接口（酒单 → 留言板 → 推荐）
2. 同时搭建前端项目基础架构
3. 前后端联调测试
4. 开发后台管理功能
5. 部署和优化

### 🚨 推荐服务开发任务（基于实现方案）

#### 数据库层开发（第1周）
- [ ] 创建推荐服务数据库表（question、option、recommendation_rule、recommendation_log）
- [ ] 删除旧版推荐服务相关表（recommendation、recommendation_log等）
- [ ] 添加推荐表索引优化和外键约束
- [ ] 准备推荐服务基础测试数据

#### 后端实体和数据访问层（第1周）
- [x] 创建Question实体类（问题管理）
- [x] 创建Option实体类（选项管理）
- [x] 创建RecommendationRule实体类（推荐规则）
- [x] 创建RecommendationLog实体类（推荐日志）
- [x] 创建QuestionMapper接口（问题数据访问）
- [x] 创建OptionMapper接口（选项数据访问）
- [x] 创建RecommendationRuleMapper接口（规则数据访问）
- [x] 创建RecommendationLogMapper接口（日志数据访问）

#### 推荐算法核心开发（第1-2周）
- [x] 实现推荐引擎核心类（RecommendationEngine）
- [x] 开发权重计算算法（WeightCalculator）
- [x] 实现标签匹配逻辑（TagMatcher）
- [x] 开发规则匹配算法（RuleMatcher）
- [x] 实现推荐分数计算（ScoreCalculator）
- [x] 添加推荐结果排序和过滤逻辑

#### 业务服务层开发（第2周）
- [x] 创建QuestionService（问题管理服务）
- [x] 创建OptionService（选项管理服务）
- [x] 创建RecommendationRuleService（规则管理服务）
- [x] 创建RecommendationLogService（推荐日志服务）
- [ ] 实现推荐缓存策略（Redis缓存）
- [x] 添加推荐日志记录功能

#### 用户端API接口开发（第2周）
- [x] 开发获取推荐问题接口（GET /recommend/questions）
- [x] 实现提交推荐请求接口（POST /recommend/result）
- [x] 添加推荐结果详情接口（GET /recommend/result/{id}）
- [x] 实现推荐历史查询接口（GET /recommend/history）
- [x] 添加推荐反馈接口（POST /recommend/feedback）

#### 管理员API接口开发（第2-3周）
- [x] 开发问题管理接口（CRUD操作）
- [x] 实现选项管理接口（CRUD操作）
- [x] 开发推荐规则配置接口（CRUD操作）
- [x] 实现推荐数据统计接口（使用情况分析）
- [x] 添加推荐日志查询接口（管理员查看）
- [x] 开发推荐效果分析接口（A/B测试支持）

#### 前端管理页面开发（第3周）
- [ ] 完成推荐问题管理页面（增删改查）
- [ ] 开发推荐选项管理页面（批量操作）
- [ ] 实现推荐规则配置页面（可视化配置）
- [ ] 添加推荐数据统计页面（图表展示）
- [ ] 开发推荐日志查看页面（搜索过滤）

#### 测试和优化（第3-4周）
- [ ] 编写推荐算法单元测试
- [ ] 实现推荐接口集成测试
- [ ] 进行推荐性能测试和优化
- [ ] 添加推荐准确性验证
- [ ] 创建推荐服务Postman测试集合
- [ ] 进行前后端推荐功能联调测试

#### 前端管理页面完善（中优先级）
- [ ] 完成酒单管理页面（增删改查酒品和分类）
- [ ] 完成推荐服务管理页面（问题、选项、规则配置）
- [ ] 实现数据统计页面（留言数、酒品数、推荐使用情况）

#### 数据和测试完善（中优先级）
- [ ] 创建完整的数据库初始化脚本
- [ ] 添加测试数据（酒品、分类、推荐问题等）
- [ ] 实现前后端联调测试
- [ ] 创建Postman API测试集合

#### 功能增强（低优先级）
- [ ] 添加图片懒加载和预览功能优化
- [ ] 添加操作日志记录功能
- [ ] 实现管理员密码修改接口

### ⚠️ 需要注意的技术要点
- 留言板的统计字段维护需要在应用层实现事务控制
- 图片上传需要实现OSS直传和安全校验
- 推荐算法需要设计灵活的规则引擎
- 前端需要做好移动端适配和性能优化
- 敏感词过滤需要集成第三方服务或自建词库
- 后台管理采用简单认证机制，通过隐藏入口和Session控制访问
- 移除Spring Security以简化架构，降低复杂度
